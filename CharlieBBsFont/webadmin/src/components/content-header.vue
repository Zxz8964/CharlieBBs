<template>
  <div class="header-container">
    <!-- å¯¼èˆªæ  -->
    <el-menu :default-active="activeIndex" class="el-menu-demo" mode="horizontal" @select="handleSelect">
      <div class="logo">
        <el-menu-item index="1" class="logoLink" style="background-color: transparent !important;">CHARLIE
          Admin</el-menu-item>
      </div>
      <!-- å…¨å±€æœç´¢æ¡† -->
      <el-menu-item index="2">
        <el-input v-model="globalSearchQuery" placeholder="æœç´¢..." class="search-input"
          @keyup.enter="handleGlobalSearch" />
      </el-menu-item>
      <el-menu-item index="3">å¸®åŠ©</el-menu-item>
    </el-menu>
    <!-- æé†’ğŸ””ï¸ -->
    <el-dropdown style="right: 50px;position: absolute;">
      <el-badge :value="pendingContentCount" class="icon-badge" max="99">
        <el-icon :size="20" style="margin-top">
          <BellFilled />
        </el-icon>
      </el-badge>
      <template #dropdown>
        <el-dropdown-menu style="display:flex;flex-direction:column">
          <el-badge :value="reportedMixCount" class="icon-badge" max="99">
            <el-dropdown-item>ä¸¾æŠ¥å®¡æ ¸</el-dropdown-item>
          </el-badge>
          <el-badge :value="voteresultCount" class="icon-badge" max="99">
            <el-dropdown-item>æŠ•ç¥¨ä¿¡æ¯</el-dropdown-item>
          </el-badge>
          <el-badge :value="messagetoadmin" class="icon-badge" max="99">
            <el-dropdown-item>ç§ä¿¡</el-dropdown-item>
          </el-badge>
        </el-dropdown-menu>
      </template>

    </el-dropdown>
    <!-- ç”¨æˆ·å¤´åƒç»„ä»¶ -->
    <UserAvater class="user-avatar"></UserAvater>
  </div>

  <!-- é¢åŒ…å±‘å¯¼èˆª -->
  <div class="header-actions">
    <el-page-header @back="goBack" style="width: 90px;">
    </el-page-header>
    <el-breadcrumb separator="/">
      <el-breadcrumb-item :to="{ path: '/' }">
        <a href="/">homepage</a>
      </el-breadcrumb-item>
      <el-breadcrumb-item>
        <a href="/">promotion management</a>
      </el-breadcrumb-item>
      <el-breadcrumb-item>promotion list</el-breadcrumb-item>
      <el-breadcrumb-item>promotion detail</el-breadcrumb-item>
    </el-breadcrumb>
  </div>

  <div class="toolbar">

  </div>
</template>

<script lang="ts" setup>
import UserAvater from './UserAvater.vue';
import { ref } from 'vue';
const goBack = () => {
  console.log('go back')
}
const activeIndex = ref('1')

// æ¨¡æ‹Ÿå¾…å®¡æ ¸å†…å®¹æ•°é‡
const pendingContentCount = ref(5) // æ›¿æ¢ä¸ºçœŸå®æ•°æ®æº
const voteresultCount = ref(3)
const reportedMixCount = ref(3)     // æ¨¡æ‹Ÿç”¨æˆ·ä¸¾æŠ¥æ•°é‡
const messagetoadmin = ref(2)    // æ¨¡æ‹Ÿå†…å®¹å®¡æ ¸æ•°é‡

// å…¨å±€æœç´¢ç›¸å…³
const globalSearchQuery = ref('')
const handleGlobalSearch = () => {
  console.log('å…¨å±€æœç´¢å…³é”®å­—:', globalSearchQuery.value)
  // æ‰§è¡Œå…¨å±€æœç´¢é€»è¾‘ï¼Œå¯ä»¥æ ¹æ®éœ€æ±‚æ›¿æ¢ä¸ºå®é™…å®ç°
}

const handleSelect = (key: string, keyPath: string[]) => {
  console.log(key, keyPath)
}
</script>

<style scoped>
.header-container {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.search-input {
  width: 300px;
}

.icon-badge {
  margin-right: 20px;
}
</style>
